---
- name: Ensure db container exists.
  containers.podman.podman_container:
    pod: "{{ pod_name }}"
    name: "{{ pod_name }}-db"
    image: "{{ image_name_mariadb }}"
    state: created
    detach: true
    restart_policy: "on-failure"
    volumes:
      - "{{ volumes.db }}:/var/lib/mysql:Z"
    env:
      MYSQL_USER: "{{ mysql_user }}"
      MYSQL_DATABASE: "{{ mysql_database }}"
      MYSQL_PASSWORD: "{{ mysql_password }}"
      MYSQL_ROOT_PASSWORD: "{{ mysql_root_password }}"
  # notify: Wait to initialized db.

- name: Flush handlers.
  ansible.builtin.meta: flush_handlers
